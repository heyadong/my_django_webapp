function ArticlePut(){}ArticlePut.prototype.run=function(){this.listenuplaodEvent(),this.ueditorInit(),this.listenpublishbtn()},ArticlePut.prototype.ueditorInit=function(){window.ue=UE.getEditor("container",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},ArticlePut.prototype.listenpublishbtn=function(){$("#news-confirm-btn").click(function(e){e.preventDefault();var t=$("#newsTitle").val(),n=$("#news-description").val(),o=$("#newscategory option:selected").val();console.log(o);var i=$("#news-image").val();console.log("thumbnail:"+i);var s=window.ue.getContent();bufanajax.post({url:"/cms/news/",data:{title:t,description:n,tag:o,thumbnail:i,content:s},success:function(e){console.log(e),200===e.code&&swal("添加文章","文章添加成功","success")},fail:function(e){console.log(e)}})})},ArticlePut.prototype.listenuplaodEvent=function(){var o="heyadong-1255763516",i="ap-chengdu",s=new COS({SecretId:"AKIDCJKDyYB891kHdosFkFmmdIsTu9CJxlur",SecretKey:"ykNp8HH8yursFZhpz4yoUJ8ygCVcZJwN"});$("#upload-file").change(function(){console.log("change event success");var n=this.files[0];n&&s.sliceUploadFile({Bucket:o,Region:i,Key:n.name,Body:n,onProgress:function(e){console.log(e.percent);var t=100*e.percent.toFixed(2)+"%";console.log(t),e&&($(".progress").show(),$("#progress-bar").css({width:t}))}},function(e,t){console.log(e,t),200===t.statusCode&&($(".progress").hide(),$("#progress-bar").css({width:"0%"}),swal("上传成功","图片已上传至腾讯云","success"),s.getObjectUrl({Bucket:o,Region:i,Key:n.name,Sign:!0},function(e,t){if(t){var n=t.Url;console.log(n),$("#news-image").val(n)}}))})})},$(function(){(new ArticlePut).run()});