function AuthScroll(){this.auth_mask=$(".auth-mask"),this.switchbtn=$(".title-b"),this.count=10,this.sms_span=$(".msg-capture-img")}AuthScroll.prototype.run=function(){this.listenclick(),this.throwback(),this.signin_method(),this.changecaptcha(),this.smscaptchaSend(),this.signup_method()},AuthScroll.prototype.listenclick=function(){var n=this;$("#sign-in").click(function(){n.auth_mask.show(),$(".sign-group").css({left:0})}),$("#sign-up").click(function(){$(".sign-group").css({left:-400}),n.auth_mask.show()}),$(".iconfont").click(function(){n.auth_mask.hide()})},AuthScroll.prototype.throwback=function(){this.switchbtn.click(function(){"-400px"===$(".sign-group").css("left")?$(".sign-group").animate({left:0},50):$(".sign-group").animate({left:-400},50)})},AuthScroll.prototype.signin_method=function(){var s=this,n=$(".sign-in"),c=n.find("input[name='telephone']"),a=n.find("input[name='password']"),i=n.find("input[name='remember']");n.find("input[name='signin-btn']").click(function(){var n=c.val(),t=a.val(),o=i.prop("checked");bufanajax.post({url:"/auth/",data:{password:t,telephone:n,remember:o},success:function(n){console.log(n),200==n.code?(s.auth_mask.hide(),window.location.reload()):console.log(n)},fail:function(n){console.log(n)}})})},AuthScroll.prototype.signup_method=function(){var n=$(".sign-up"),t=n.find("[value='注册']"),i=n.find("[name='telephone']"),e=n.find("[name='username']"),l=n.find("[name='captcha']"),u=n.find("[name='smscaptcha']"),h=n.find("[name='pw1']"),p=n.find("[name='pw2']");t.click(function(){console.log("success into btn");var n=i.val(),t=e.val(),o=l.val(),s=u.val(),c=h.val(),a=p.val();console.log("图形验证码"),console.log(o,n,t,s,a,c),console.log("短信验证码"),console.log(s),bufanajax.post({url:"/auth/signup/",data:{username:t,telephone:n,password1:c,password2:a,img_captcha:o,sms_captcha:s},success:function(n){console.log("成功请求"),200===n.code?(console.log(n),window.location.reload()):console.log(n)},fail:function(n){console.log(n)}})})},AuthScroll.prototype.changecaptcha=function(){var n=$(".captcha_img");n.click(function(){n.attr("src","/news/draw?"+Math.random())})},AuthScroll.prototype.smsSuccessevent=function(){var n=this,t=setInterval(function(){n.count--,n.sms_span.text(n.count),n.sms_span.addClass("disabled"),n.sms_span.bind("click"),n.count<0&&(clearInterval(t),n.sms_span.text("发送验证码"),n.smscaptchaSend())},1e3)},AuthScroll.prototype.smscaptchaSend=function(){var t=this;t.sms_span.click(function(){bufanajax.get({url:"news/sms",success:function(n){console.log(n),t.smsSuccessevent()},fail:function(n){console.log(n)}})})},$(function(){(new AuthScroll).run()});